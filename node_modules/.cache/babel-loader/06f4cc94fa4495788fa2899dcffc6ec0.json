{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\Roey\\\\Programming\\\\google\\\\ver_6.8\\\\LeketGo\\\\pages\\\\login.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport fire from '../config/firebaseConfig';\nimport Header from '../components/Header.js';\nimport Router from 'next/router';\nimport checkAuthAndRefresh from '../dbActions/checkAuth';\nimport Loading from './loading';\nimport Logo from '../components/Logo.js';\nimport { Alert, Form, Button, Col, Navbar, Card } from 'react-bootstrap';\nimport Link from 'next/link';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      email: '',\n      password: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState(_defineProperty({}, e.target.id, e.target.value));\n\n      console.log(_this.state.email);\n      console.log(_this.state.password);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (e) {\n      event.preventDefault();\n      var db = fire.firestore();\n      fire.auth().signInWithEmailAndPassword(_this.state.email, _this.state.password).then(function (user) {\n        db.collection(\"users\").doc(user.user.uid).get().then(function (doc) {\n          Router.push('/');\n        });\n      }).catch(function (err) {\n        event.stopPropagation();\n\n        _this.props.dispatch({\n          type: 'LOGIN_ERR',\n          msg: err.message\n        });\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (!this.props.authChecked) checkAuthAndRefresh(this.props.dispatch);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!this.props.authChecked) {\n        return React.createElement(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(Header, {\n        isLogin: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          height: '100vh',\n          width: '100%',\n          backgroundImage: 'linear-gradient(#99E1ED, white)'\n        },\n        className: \"d-flex flex-column align-items-center justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(Logo, {\n        use: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), React.createElement(\"main\", {\n        style: {\n          maxWidth: '400px'\n        },\n        className: \"m-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: \"m-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(Card.Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, this.props.loginErr ? React.createElement(Alert, {\n        className: \"mb-4\",\n        style: {\n          textAlign: 'left',\n          direction: 'ltr'\n        },\n        variant: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"ltr fas fa-exclamation-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), this.props.loginErr) : '', React.createElement(Form, {\n        onSubmit: function onSubmit(e) {\n          return _this2.handleSubmit(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"formBasicEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"\\u05DB\\u05EA\\u05D5\\u05D1\\u05EA \\u05D3\\u05D5\\u05D0\\u05E8 \\u05D0\\u05DC\\u05E7\\u05D8\\u05E8\\u05D5\\u05E0\\u05D9\"), React.createElement(Form.Control, {\n        type: \"email\",\n        id: \"email\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"\\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\"), React.createElement(Form.Control, {\n        type: \"password\",\n        id: \"password\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Link, {\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"\\u05E9\\u05DB\\u05D7\\u05EA\\u05D9 \\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\")), React.createElement(Button, {\n        type: \"submit\",\n        onClick: this.handleSubmit,\n        variant: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"\\u05D4\\u05EA\\u05D7\\u05D1\\u05E8\\u05D5\\u05EA\"))))))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default connect(function (state) {\n  return state;\n})(Login);","map":{"version":3,"sources":["D:\\Roey\\Programming\\google\\ver_6.8\\LeketGo\\pages\\login.js"],"names":["React","Component","connect","fire","Header","Router","checkAuthAndRefresh","Loading","Logo","Alert","Form","Button","Col","Navbar","Card","Link","Login","email","password","e","setState","target","id","value","console","log","state","event","preventDefault","db","firestore","auth","signInWithEmailAndPassword","then","user","collection","doc","uid","get","push","catch","err","stopPropagation","props","dispatch","type","msg","message","authChecked","height","width","backgroundImage","maxWidth","loginErr","textAlign","direction","handleSubmit","handleChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\"\r\nimport fire from '../config/firebaseConfig'\r\nimport Header from '../components/Header.js'\r\nimport Router from 'next/router'\r\nimport checkAuthAndRefresh from '../dbActions/checkAuth'\r\nimport Loading from './loading'\r\nimport Logo from '../components/Logo.js'\r\nimport {Alert, Form, Button, Col, Navbar, Card} from 'react-bootstrap'\r\nimport Link from 'next/link'\r\n\r\nclass Login extends Component {\r\n    state = {\r\n        email: '',\r\n        password: ''\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        })\r\n        console.log(this.state.email);\r\n        console.log(this.state.password);\r\n    }\r\n\r\n    componentWillMount() {\r\n        if (!this.props.authChecked) checkAuthAndRefresh(this.props.dispatch)\r\n    }\r\n\t\r\n    handleSubmit = (e) => {\r\n        event.preventDefault();\r\n        const db = fire.firestore();\r\n        fire.auth().signInWithEmailAndPassword(this.state.email, this.state.password\r\n        ).then(\r\n            (user) => {\r\n                db.collection(\"users\").doc(user.user.uid).get().then((doc) => {\r\n                    Router.push('/');\r\n                })\r\n            }).catch(\r\n                (err) => {\r\n                    event.stopPropagation();\r\n                    this.props.dispatch({ type: 'LOGIN_ERR', msg: err.message });\r\n                });\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.authChecked) {\r\n            return (<Loading />)\r\n        }\r\n        return (\r\n            <div>\r\n                <Header isLogin={true} />\r\n                <div style={{height: '100vh', width: '100%', backgroundImage: 'linear-gradient(#99E1ED, white)'}} className=\"d-flex flex-column align-items-center justify-content-center\">\r\n                <Logo use='login' />\r\n                    <main style={{maxWidth: '400px'}} className=\"m-2\">\r\n                            <Card className='m-2'>\r\n                                <Card.Body>\r\n                                    <Card.Text>\r\n                                    \r\n                                    {this.props.loginErr ?\r\n                                        <Alert className='mb-4' style={{ textAlign: 'left', direction: 'ltr' }} variant='danger'><i class=\"ltr fas fa-exclamation-circle\"></i>{this.props.loginErr}</Alert> : ''}\r\n                                    <Form onSubmit={e => this.handleSubmit(e)}>\r\n                                        <Form.Group controlId=\"formBasicEmail\">\r\n                                            <Form.Label>כתובת דואר אלקטרוני</Form.Label>\r\n                                            <Form.Control type=\"email\" id=\"email\" onChange={this.handleChange} />\r\n                                        </Form.Group>\r\n                                        <Form.Group controlId=\"formBasicPassword\">\r\n                                            <Form.Label>סיסמה</Form.Label>\r\n                                            <Form.Control type=\"password\" id=\"password\" onChange={this.handleChange} />\r\n                                        </Form.Group>\r\n                                        <p><Link href=\"#\">שכחתי סיסמה</Link></p>\r\n                                        <Button type=\"submit\" onClick={this.handleSubmit} variant=\"primary\">\r\n                                            התחברות\r\n                                        </Button>\r\n                                        \r\n                                        </Form>\r\n                                    </Card.Text>\r\n                                </Card.Body>\r\n                                </Card>\r\n                    </main>\r\n                </div></div>);\r\n        }\r\n}\r\n\r\nexport default connect(state => state)(Login);"]},"metadata":{},"sourceType":"module"}