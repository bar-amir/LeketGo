{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Oz\\\\Desktop\\\\leket\\\\leket\\\\components\\\\TableBlock.js\";\nimport React from 'react';\nimport Entry from '../components/Entry';\nimport { connect } from \"react-redux\";\nimport { Table, Button, ButtonGroup, InputGroup, Form, Col, Row, DropdownButton, Dropdown, FormControl, Navbar } from 'react-bootstrap';\nimport setAssignedTasks from '../dbActions/setAssignedTasks';\nimport XLSX from 'xlsx';\n\nvar TableBlock =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TableBlock, _React$Component);\n\n  function TableBlock(props) {\n    var _this;\n\n    _classCallCheck(this, TableBlock);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TableBlock).call(this, props));\n    _this.state = {\n      tableColumns: _this.getTableColumns(),\n      entrySelectedCounter: 0,\n      selectedEntries: {},\n      columnNames: {\n        'actions': 'פעולות',\n        'date': 'תאריך',\n        'time': 'שעה',\n        'city': 'עיר',\n        'fullAddress': 'כתובת',\n        'name': 'ספק',\n        'uid': 'uid',\n        'firstName': 'שם פרטי',\n        'lastName': 'שם משפחה',\n        'fullName': 'שם מלא',\n        'region': 'אזור',\n        'email': 'דוא\"ל',\n        'tz': 'תעודת זהות',\n        'street': 'רחוב ומספר',\n        'contactName': 'שם',\n        'contactNumber': 'טלפון',\n        'checkBox': '',\n        'phone': 'טלפון'\n      },\n      searchValue: '',\n      searchField: _this.props.page == 'adminUsers' ? 'firstName' : 'name'\n    };\n    _this.selectCallback = _this.selectCallback.bind(_assertThisInitialized(_this));\n    _this.cancelSelection = _this.cancelSelection.bind(_assertThisInitialized(_this));\n    _this.assignTasks = _this.assignTasks.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TableBlock, [{\n    key: \"handleFileUpload\",\n    value: function handleFileUpload(file) {\n      var reader = new FileReader();\n\n      reader.onload = function (evt) {\n        var bstr = evt.target.result;\n        var wb = XLSX.read(bstr, {\n          type: 'binary'\n        });\n        var wsname = wb.SheetNames[0];\n        var ws = wb.Sheets[wsname];\n        var data = XLSX.utils.sheet_to_csv(ws, {\n          header: 1\n        });\n        console.log(\"Data>>>\" + data);\n      };\n\n      reader.readAsBinaryString(file);\n      console.log(file);\n    }\n  }, {\n    key: \"getTableColumns\",\n    value: function getTableColumns() {\n      switch (this.props.page) {\n        case 'index':\n          return ['checkBox', 'date', 'time', 'city', 'name'];\n\n        case 'assignedTasks':\n          return ['date', 'time', 'fullAddress', 'name', 'contactName', 'contactNumber', 'actions'];\n\n        case 'taskReports':\n          return ['date', 'street', 'city', 'name', 'actions'];\n\n        case 'adminUsers':\n          return ['tz', 'firstName', 'lastName', 'email', 'phone', 'region', 'actions'];\n\n        case 'adminTasks':\n          return ['date', 'time', 'street', 'city', 'name', 'actions'];\n\n        default:\n          break;\n      }\n    }\n  }, {\n    key: \"selectCallback\",\n    value: function selectCallback(entry, isSelected) {\n      var newSelectedEntries = _objectSpread({}, this.state.selectedEntries);\n\n      if (isSelected) {\n        newSelectedEntries[entry.id] = _objectSpread({}, entry);\n        this.setState({\n          entrySelectedCounter: this.state.entrySelectedCounter + 1,\n          selectedEntries: newSelectedEntries\n        });\n      } else {\n        delete newSelectedEntries[entry.id];\n        this.setState({\n          entrySelectedCounter: this.state.entrySelectedCounter - 1,\n          selectedEntries: newSelectedEntries\n        });\n      }\n    }\n  }, {\n    key: \"cancelSelection\",\n    value: function cancelSelection() {\n      this.setState({\n        entrySelectedCounter: 0,\n        selectedEntries: {}\n      });\n    }\n  }, {\n    key: \"assignTasks\",\n    value: function assignTasks() {\n      var taskIDs = [];\n\n      for (var taskID in this.state.selectedEntries) {\n        taskIDs.push(taskID);\n      }\n\n      setAssignedTasks(this.props, taskIDs, this.state.entrySelectedCounter, this.state.selectedEntries);\n    }\n  }, {\n    key: \"handleChangeForm\",\n    value: function handleChangeForm(event) {\n      var fleldVal = event.target.value;\n      this.setState({\n        searchValue: fleldVal\n      });\n    }\n  }, {\n    key: \"handleChangeDropDown\",\n    value: function handleChangeDropDown(event) {\n      var fleldVal = event.target.value;\n\n      switch (fleldVal) {\n        case 'שם פרטי':\n          this.setState({\n            searchField: 'firstName'\n          });\n          break;\n\n        case 'שם משפחה':\n          this.setState({\n            searchField: 'lastName'\n          });\n          break;\n\n        case 'תעודת זהות':\n          this.setState({\n            searchField: 'tz'\n          });\n          break;\n\n        case 'רחוב ומספר':\n          this.setState({\n            searchField: 'address'\n          });\n          break;\n\n        case 'עיר מגורים':\n          this.setState({\n            searchField: 'city'\n          });\n          break;\n\n        case 'מספר טלפון':\n          this.setState({\n            searchField: 'phone'\n          });\n          break;\n\n        case 'דואר אלקטרוני':\n          this.setState({\n            searchField: 'email'\n          });\n          break;\n\n        case 'ספק':\n          this.setState({\n            searchField: 'name'\n          });\n          break;\n\n        case 'עיר':\n          this.setState({\n            searchField: 'city'\n          });\n          break;\n\n        case 'רחוב ומספר':\n          this.setState({\n            searchField: 'address'\n          });\n          break;\n\n        case 'איש קשר':\n          this.setState({\n            searchField: 'contact name'\n          });\n          break;\n\n        case 'טלפון':\n          this.setState({\n            searchField: 'contact number'\n          });\n          break;\n\n        default:\n          break;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.props.data.length == 0) {\n        return React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            width: '100%',\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"nothing\",\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: \"/static/nothing.png\",\n          width: \"100\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          style: {\n            fontSize: '20px',\n            marginTop: '10px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, \"\\u05D4\\u05DE\\u05DE\\u05DE... \\u05D0\\u05D9\\u05DF \\u05DB\\u05D0\\u05DF \\u05DB\\u05DC\\u05D5\\u05DD\")));\n      } else {\n        var actionsBar = '';\n\n        if (this.props.isSelectable && this.state.entrySelectedCounter > 0) {\n          actionsBar = React.createElement(Navbar, {\n            bg: \"light\",\n            fixed: \"bottom\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190\n            },\n            __self: this\n          }, React.createElement(ButtonGroup, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191\n            },\n            __self: this\n          }, React.createElement(Button, {\n            onClick: this.assignTasks,\n            variant: \"primary\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 192\n            },\n            __self: this\n          }, \"\\u05E9\\u05D9\\u05D1\\u05D5\\u05E5 \", this.state.entrySelectedCounter, \" \\u05D0\\u05D9\\u05E1\\u05D5\\u05E4\\u05D9\\u05DD\"), React.createElement(Button, {\n            onClick: this.cancelSelection,\n            variant: \"secondary\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 193\n            },\n            __self: this\n          }, \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\")));\n        }\n\n        if (this.props.isSearchable && this.props.page == 'adminUsers') {\n          actionsBar = React.createElement(Navbar, {\n            bg: \"light\",\n            fixed: \"bottom\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, React.createElement(Form, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 200\n            },\n            __self: this\n          }, React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 202\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"btn-group\",\n            role: \"group\",\n            \"aria-label\": \"Basic example\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 203\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            style: {\n              whiteSpace: 'nowrap'\n            },\n            type: \"button\",\n            className: \"btn btn-primary\",\n            onClick: function onClick() {\n              return _this2.props.dispatch({\n                type: 'OPEN_MODAL',\n                msg: 'ADD_USER',\n                entries: _this2.props.entry\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 204\n            },\n            __self: this\n          }, \"\\u05D4\\u05D5\\u05E1\\u05E4\\u05EA \\u05DE\\u05EA\\u05E0\\u05D3\\u05D1\"), React.createElement(\"button\", {\n            style: {\n              whiteSpace: 'nowrap'\n            },\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            onClick: function onClick() {\n              return _this2.props.dispatch({\n                type: 'OPEN_MODAL',\n                msg: 'ADD_USER_CSV',\n                entries: _this2.props.entry\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 205\n            },\n            __self: this\n          }, \"\\u05D4\\u05D5\\u05E1\\u05E4\\u05D4 \\u05DE\\u05E7\\u05D5\\u05D1\\u05E5\"))), React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 207\n            },\n            __self: this\n          }, React.createElement(InputGroup, {\n            className: \"mb-3\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 208\n            },\n            __self: this\n          }, React.createElement(Form.Control, {\n            as: \"select\",\n            variant: \"outline-secondary\",\n            title: \"Dropdown\",\n            drop: \"up\",\n            onChange: this.handleChangeDropDown.bind(this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 209\n            },\n            __self: this\n          }, React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 214\n            },\n            __self: this\n          }, \"\\u05E9\\u05DD \\u05E4\\u05E8\\u05D8\\u05D9\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 215\n            },\n            __self: this\n          }, \"\\u05E9\\u05DD \\u05DE\\u05E9\\u05E4\\u05D7\\u05D4\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 216\n            },\n            __self: this\n          }, \"\\u05EA\\u05E2\\u05D5\\u05D3\\u05EA \\u05D6\\u05D4\\u05D5\\u05EA\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 217\n            },\n            __self: this\n          }, \"\\u05E8\\u05D7\\u05D5\\u05D1 \\u05D5\\u05DE\\u05E1\\u05E4\\u05E8\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 218\n            },\n            __self: this\n          }, \"\\u05E2\\u05D9\\u05E8 \\u05DE\\u05D2\\u05D5\\u05E8\\u05D9\\u05DD\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 219\n            },\n            __self: this\n          }, \"\\u05DE\\u05E1\\u05E4\\u05E8 \\u05D8\\u05DC\\u05E4\\u05D5\\u05DF\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 220\n            },\n            __self: this\n          }, \"\\u05D3\\u05D5\\u05D0\\u05E8 \\u05D0\\u05DC\\u05E7\\u05D8\\u05E8\\u05D5\\u05E0\\u05D9\")), React.createElement(FormControl, {\n            onChange: this.handleChangeForm.bind(this),\n            \"aria-describedby\": \"basic-addon1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 222\n            },\n            __self: this\n          }))))));\n        }\n\n        if (this.props.isSearchable && this.props.page == 'adminTasks') {\n          actionsBar = React.createElement(Navbar, {\n            bg: \"light\",\n            fixed: \"bottom\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 231\n            },\n            __self: this\n          }, React.createElement(Form, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 232\n            },\n            __self: this\n          }, React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 233\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 234\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"btn-group\",\n            role: \"group\",\n            \"aria-label\": \"Basic example\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            type: \"file\",\n            id: \"fileUploader\",\n            accept: \"xlsx\",\n            style: {\n              display: \"none\"\n            },\n            onChange: function onChange(e) {\n              return _this2.handleFileUpload(e.target.files[0]);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 236\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            style: {\n              whiteSpace: 'nowrap'\n            },\n            type: \"button\",\n            className: \"btn btn-primary\",\n            onClick: function onClick() {\n              return _this2.props.dispatch({\n                type: 'OPEN_MODAL',\n                msg: 'ADD_TASK',\n                entries: _this2.props.entry\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 237\n            },\n            __self: this\n          }, \"\\u05D4\\u05D5\\u05E1\\u05E4\\u05EA \\u05D0\\u05D9\\u05E1\\u05D5\\u05E3\"), React.createElement(\"button\", {\n            style: {\n              whiteSpace: 'nowrap'\n            },\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            onClick: function onClick() {\n              document.getElementById('fileUploader').click();\n\n              _this2.props.dispatch({\n                type: 'OPEN_MODAL',\n                msg: 'ADD_TASK_CSV',\n                entries: _this2.props.entry\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 238\n            },\n            __self: this\n          }, \"\\u05D4\\u05D5\\u05E1\\u05E4\\u05D4 \\u05DE\\u05E7\\u05D5\\u05D1\\u05E5\"), React.createElement(\"button\", {\n            style: {\n              whiteSpace: 'nowrap'\n            },\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            onClick: function onClick() {\n              return _this2.props.dispatch({\n                type: 'OPEN_MODAL',\n                msg: 'EXPORT_TASK_CSV',\n                entries: _this2.props.entry\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 244\n            },\n            __self: this\n          }, \"\\u05D9\\u05D9\\u05E6\\u05D5\\u05D0 \\u05D3\\u05D5\\u05D7\"))), React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 247\n            },\n            __self: this\n          }, React.createElement(InputGroup, {\n            className: \"mb-3\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 248\n            },\n            __self: this\n          }, React.createElement(Form.Control, {\n            as: \"select\",\n            variant: \"outline-secondary\",\n            title: \"Dropdown\",\n            drop: \"up\",\n            onChange: this.handleChangeDropDown.bind(this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 249\n            },\n            __self: this\n          }, React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 255\n            },\n            __self: this\n          }, \"\\u05E1\\u05E4\\u05E7\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 256\n            },\n            __self: this\n          }, \"\\u05E2\\u05D9\\u05E8\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 257\n            },\n            __self: this\n          }, \"\\u05E8\\u05D7\\u05D5\\u05D1 \\u05D5\\u05DE\\u05E1\\u05E4\\u05E8\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 258\n            },\n            __self: this\n          }, \"\\u05D0\\u05D9\\u05E9 \\u05E7\\u05E9\\u05E8\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 259\n            },\n            __self: this\n          }, \"\\u05D8\\u05DC\\u05E4\\u05D5\\u05DF\")), React.createElement(FormControl, {\n            onChange: this.handleChangeForm.bind(this),\n            \"aria-describedby\": \"basic-addon1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 261\n            },\n            __self: this\n          }))))));\n        }\n\n        return React.createElement(\"div\", {\n          className: \"table-responsive\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270\n          },\n          __self: this\n        }, React.createElement(Table, {\n          hover: true,\n          responsive: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273\n          },\n          __self: this\n        }, this.state.tableColumns.map(function (column) {\n          switch (column) {\n            default:\n              return React.createElement(\"th\", {\n                scope: \"col\",\n                key: column,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 278\n                },\n                __self: this\n              }, _this2.state.columnNames[column]);\n          }\n        }))), React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, this.props.data.map(function (entry) {\n          var isSelected = false;\n\n          if (_this2.state.selectedEntries[entry.id]) {\n            isSelected = true;\n          }\n\n          var ret = React.createElement(Entry, {\n            page: _this2.props.page,\n            isSelected: isSelected,\n            isSelectable: _this2.props.isSelectable,\n            type: _this2.props.type,\n            key: entry.id,\n            selectCallback: _this2.selectCallback,\n            entry: entry,\n            tableColumns: _this2.state.tableColumns,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 290\n            },\n            __self: this\n          });\n\n          if (_this2.props.isSearchable) {\n            for (var key in entry) {\n              if (key == _this2.state.searchField) if (entry[key].includes(_this2.state.searchValue)) return ret;\n            }\n          } else {\n            return ret;\n          }\n        }))), actionsBar);\n      }\n    }\n  }]);\n\n  return TableBlock;\n}(React.Component);\n\nexport default connect(function (state) {\n  return state;\n})(TableBlock);","map":{"version":3,"sources":["C:\\Users\\Oz\\Desktop\\leket\\leket\\components\\TableBlock.js"],"names":["React","Entry","connect","Table","Button","ButtonGroup","InputGroup","Form","Col","Row","DropdownButton","Dropdown","FormControl","Navbar","setAssignedTasks","XLSX","TableBlock","props","state","tableColumns","getTableColumns","entrySelectedCounter","selectedEntries","columnNames","searchValue","searchField","page","selectCallback","bind","cancelSelection","assignTasks","file","reader","FileReader","onload","evt","bstr","target","result","wb","read","type","wsname","SheetNames","ws","Sheets","data","utils","sheet_to_csv","header","console","log","readAsBinaryString","entry","isSelected","newSelectedEntries","id","setState","taskIDs","taskID","push","event","fleldVal","value","length","display","width","alignItems","justifyContent","flexDirection","fontSize","marginTop","actionsBar","isSelectable","isSearchable","whiteSpace","dispatch","msg","entries","handleChangeDropDown","handleChangeForm","e","handleFileUpload","files","document","getElementById","click","map","column","ret","key","includes","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Entry from '../components/Entry'\r\nimport { connect } from \"react-redux\"\r\nimport { Table, Button, ButtonGroup, InputGroup, Form, Col, Row, DropdownButton, Dropdown, FormControl, Navbar } from 'react-bootstrap'\r\nimport setAssignedTasks from '../dbActions/setAssignedTasks'\r\nimport XLSX from 'xlsx';\r\n\r\nclass TableBlock extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttableColumns: this.getTableColumns(),\r\n\t\t\tentrySelectedCounter: 0,\r\n\t\t\tselectedEntries: {},\r\n\t\t\tcolumnNames: {\r\n\t\t\t\t'actions': 'פעולות',\r\n\t\t\t\t'date': 'תאריך',\r\n\t\t\t\t'time': 'שעה',\r\n\t\t\t\t'city': 'עיר',\r\n\t\t\t\t'fullAddress': 'כתובת',\r\n\t\t\t\t'name': 'ספק',\r\n\t\t\t\t'uid': 'uid',\r\n\t\t\t\t'firstName': 'שם פרטי',\r\n\t\t\t\t'lastName': 'שם משפחה',\r\n\t\t\t\t'fullName': 'שם מלא',\r\n\t\t\t\t'region': 'אזור',\r\n\t\t\t\t'email': 'דוא\"ל',\r\n\t\t\t\t'tz': 'תעודת זהות',\r\n\t\t\t\t'street': 'רחוב ומספר',\r\n\t\t\t\t'contactName': 'שם',\r\n\t\t\t\t'contactNumber': 'טלפון',\r\n\t\t\t\t'checkBox': '',\r\n\t\t\t\t'phone': 'טלפון'\r\n\t\t\t},\r\n\t\t\tsearchValue: '',\r\n\t\t\tsearchField: this.props.page == 'adminUsers' ? 'firstName' : 'name',\r\n\t\t};\r\n\t\tthis.selectCallback = this.selectCallback.bind(this);\r\n\t\tthis.cancelSelection = this.cancelSelection.bind(this);\r\n\t\tthis.assignTasks = this.assignTasks.bind(this);\r\n\t}\r\n\r\n    handleFileUpload(file) {\r\n        \r\n        const reader = new FileReader();\r\n        reader.onload = (evt) => {\r\n            \r\n            const bstr = evt.target.result;\r\n            const wb = XLSX.read(bstr, { type: 'binary' });\r\n            \r\n            const wsname = wb.SheetNames[0];\r\n            const ws = wb.Sheets[wsname];\r\n            \r\n            const data = XLSX.utils.sheet_to_csv(ws, { header: 1 });\r\n            \r\n            console.log(\"Data>>>\" + data);\r\n        };\r\n        reader.readAsBinaryString(file);\r\n        console.log(file);\r\n    }\r\n\r\n\r\n\tgetTableColumns() {\r\n\t\tswitch (this.props.page) {\r\n\t\t\tcase 'index':\r\n\t\t\t\treturn ['checkBox', 'date', 'time', 'city', 'name'];\r\n\t\t\tcase 'assignedTasks':\r\n\t\t\t\treturn ['date', 'time', 'fullAddress', 'name', 'contactName', 'contactNumber', 'actions'];\r\n\t\t\tcase 'taskReports':\r\n\t\t\t\treturn ['date', 'street', 'city', 'name', 'actions'];\r\n\t\t\tcase 'adminUsers':\r\n\t\t\t\treturn ['tz', 'firstName', 'lastName', 'email', 'phone', 'region', 'actions'];\r\n\t\t\tcase 'adminTasks':\r\n\t\t\t\t\treturn ['date', 'time', 'street', 'city', 'name', 'actions'];\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tselectCallback(entry, isSelected) {\r\n\t\tlet newSelectedEntries = {...this.state.selectedEntries};\r\n\t\tif(isSelected){\r\n\t\t\tnewSelectedEntries[entry.id] = {...entry};\r\n\t\t\tthis.setState({\r\n\t\t\t\tentrySelectedCounter: this.state.entrySelectedCounter + 1,\r\n\t\t\t\tselectedEntries: newSelectedEntries\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tdelete newSelectedEntries[entry.id];\r\n\t\t\tthis.setState({\r\n\t\t\t\tentrySelectedCounter: this.state.entrySelectedCounter - 1,\r\n\t\t\t\tselectedEntries: newSelectedEntries\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcancelSelection() {\r\n\t\tthis.setState({\r\n\t\t\tentrySelectedCounter: 0,\r\n\t\t\tselectedEntries: {}\r\n\t\t});\r\n\t}\r\n\r\n\tassignTasks() {\r\n        var taskIDs = [];\r\n        for (var taskID in this.state.selectedEntries) {\r\n            taskIDs.push(taskID)         \r\n        }\r\n        setAssignedTasks(this.props, taskIDs, this.state.entrySelectedCounter, this.state.selectedEntries)\r\n\t}\r\n\r\n\thandleChangeForm(event) {\r\n\t\t\r\n\t\tlet fleldVal = event.target.value;\r\n\t\tthis.setState({searchValue: fleldVal});\r\n\t}\r\n\r\n\thandleChangeDropDown(event) {\r\n\t\tlet fleldVal = event.target.value;\r\n\t\tswitch (fleldVal) {\r\n\t\t\tcase 'שם פרטי':\r\n\t\t\t\tthis.setState({searchField: 'firstName'});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'שם משפחה':\r\n\t\t\t\t\tthis.setState({searchField: 'lastName'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'תעודת זהות':\r\n\t\t\t\tthis.setState({searchField: 'tz'});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'רחוב ומספר':\r\n\t\t\t\tthis.setState({searchField: 'address'});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'עיר מגורים':\r\n\t\t\t\t\tthis.setState({searchField: 'city'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'מספר טלפון':\r\n\t\t\t\tthis.setState({searchField: 'phone'});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'דואר אלקטרוני':\r\n\t\t\t\tthis.setState({searchField: 'email'});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'ספק':\r\n\t\t\t\t\tthis.setState({searchField: 'name'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'עיר':\r\n\t\t\t\t\tthis.setState({searchField: 'city'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'רחוב ומספר':\r\n\t\t\t\t\tthis.setState({searchField: 'address'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'איש קשר':\r\n\t\t\t\t\tthis.setState({searchField: 'contact name'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'טלפון':\r\n\t\t\t\t\tthis.setState({searchField: 'contact number'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.data.length == 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\tjustifyContent: 'center'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<div className=\"nothing\" style= {{\r\n\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\tflexDirection: 'column',\r\n\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\tjustifyContent: 'center'\r\n\t\t\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<img src=\"/static/nothing.png\" width=\"100\"/>\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tfontSize: '20px',\r\n\t\t\t\t\t\t\tmarginTop: '10px'\r\n\t\t\t\t\t\t}}>המממ... אין כאן כלום</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\tlet actionsBar = '';\r\n\t\tif (this.props.isSelectable && this.state.entrySelectedCounter > 0) {\r\n\t\t\tactionsBar = \r\n\t\t\t\t<Navbar bg='light' fixed='bottom'>\r\n\t\t\t\t\t<ButtonGroup>\r\n\t\t\t\t\t\t<Button onClick={this.assignTasks} variant='primary'>שיבוץ {this.state.entrySelectedCounter} איסופים</Button>\r\n\t\t\t\t\t\t<Button onClick={this.cancelSelection} variant='secondary'>ביטול</Button>\r\n\t\t\t\t\t</ButtonGroup>\r\n\t\t\t\t</Navbar>;\r\n\t\t}\r\n\t\tif (this.props.isSearchable && this.props.page=='adminUsers') {\r\n\t\t\tactionsBar = \r\n\t\t\t\t<Navbar bg='light' fixed='bottom'>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n\t\t\t\t\t\t\t<button style={{whiteSpace: 'nowrap'}} type=\"button\" className=\"btn btn-primary\" onClick={() => this.props.dispatch({ type: 'OPEN_MODAL', msg: 'ADD_USER', entries: this.props.entry})}>הוספת מתנדב</button>\r\n\t\t\t\t\t\t\t<button style={{whiteSpace: 'nowrap'}} type=\"button\" className=\"btn btn-secondary\" onClick={() => this.props.dispatch({ type: 'OPEN_MODAL', msg: 'ADD_USER_CSV', entries: this.props.entry})}>הוספה מקובץ</button></div>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\tas=\"select\"\r\n\t\t\t\t\t\t\t\tvariant='outline-secondary'\r\n\t\t\t\t\t\t\t\ttitle='Dropdown'\r\n\t\t\t\t\t\t\t\tdrop='up' onChange={this.handleChangeDropDown.bind(this)}>\r\n\t\t\t\t\t\t\t\t\t<option>שם פרטי</option>\r\n\t\t\t\t\t\t\t\t\t<option>שם משפחה</option>\r\n\t\t\t\t\t\t\t\t\t<option>תעודת זהות</option>\r\n\t\t\t\t\t\t\t\t\t<option>רחוב ומספר</option>\r\n\t\t\t\t\t\t\t\t\t<option>עיר מגורים</option>\r\n\t\t\t\t\t\t\t\t\t<option>מספר טלפון</option>\r\n\t\t\t\t\t\t\t\t\t<option>דואר אלקטרוני</option>\r\n\t\t\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t\t\t\t<FormControl onChange={this.handleChangeForm.bind(this)} aria-describedby=\"basic-addon1\" />\r\n\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Navbar>;\r\n\t\t}\r\n\t\tif (this.props.isSearchable && this.props.page=='adminTasks') {\r\n\t\t\tactionsBar = \r\n\t\t\t\t<Navbar bg='light' fixed='bottom'>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n                            <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n                                <input type='file' id='fileUploader' accept='xlsx' style={{ display: \"none\" }} onChange={(e) => this.handleFileUpload(e.target.files[0])} />\r\n\t\t\t\t\t\t\t<button style={{whiteSpace: 'nowrap'}} type=\"button\" className=\"btn btn-primary\" onClick={() => this.props.dispatch({ type: 'OPEN_MODAL', msg: 'ADD_TASK', entries: this.props.entry})}>הוספת איסוף</button>\r\n                                <button style={{ whiteSpace: 'nowrap' }} type=\"button\" className=\"btn btn-secondary\" onClick={() => {\r\n                                    document.getElementById('fileUploader').click()\r\n                                    this.props.dispatch({\r\n                                        type: 'OPEN_MODAL', msg: 'ADD_TASK_CSV', entries: this.props.entry\r\n                                    })\r\n                                }}>הוספה מקובץ</button>\r\n\t\t\t\t\t\t\t<button style={{whiteSpace: 'nowrap'}} type=\"button\" className=\"btn btn-secondary\" onClick={() => this.props.dispatch({ type: 'OPEN_MODAL', msg: 'EXPORT_TASK_CSV', entries: this.props.entry})}>ייצוא דוח</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\tas=\"select\"\r\n\t\t\t\t\t\t\t\tvariant='outline-secondary'\r\n\t\t\t\t\t\t\t\ttitle='Dropdown'\r\n\t\t\t\t\t\t\t\tdrop='up'\r\n\t\t\t\t\t\t\t\tonChange={this.handleChangeDropDown.bind(this)}>\r\n\t\t\t\t\t\t\t\t\t<option>ספק</option>\r\n\t\t\t\t\t\t\t\t\t<option>עיר</option>\r\n\t\t\t\t\t\t\t\t\t<option>רחוב ומספר</option>\r\n\t\t\t\t\t\t\t\t\t<option>איש קשר</option>\r\n\t\t\t\t\t\t\t\t\t<option>טלפון</option>\r\n\t\t\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t\t\t\t<FormControl onChange={this.handleChangeForm.bind(this)} aria-describedby=\"basic-addon1\" />\r\n\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Navbar>;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"table-responsive\">\r\n\t\t\t\t<Table hover responsive>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t{this.state.tableColumns.map((column) => {\r\n\t\t\t\t\t\t\tswitch (column){\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" key={column}>{this.state.columnNames[column]}</th>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{this.props.data.map((entry) => {\r\n\t\t\t\t\t\t\tlet isSelected = false;\r\n\t\t\t\t\t\t\tif (this.state.selectedEntries[entry.id]){\r\n\t\t\t\t\t\t\t\tisSelected = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet ret = <Entry page={this.props.page} isSelected={isSelected} isSelectable={this.props.isSelectable} type={this.props.type} key={entry.id} selectCallback={this.selectCallback} entry={entry} tableColumns={this.state.tableColumns}/>\r\n\t\t\t\t\t\t\tif (this.props.isSearchable){\r\n\t\t\t\t\t\t\t\tfor (let key in entry){\r\n\t\t\t\t\t\t\t\t\tif (key == this.state.searchField)\r\n\t\t\t\t\t\t\t\t\t\tif(entry[key].includes(this.state.searchValue))\r\n\t\t\t\t\t\t\t\t\t\t\treturn ret;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn ret;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</Table>\r\n\t\t\t\t{actionsBar}\r\n\t\t\t</div>\r\n\t\t);\r\n\t\t\t\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(state => state)(TableBlock);"]},"metadata":{},"sourceType":"module"}