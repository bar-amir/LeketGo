{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport fire from '../config/firebaseConfig';\nimport Header from '../components/Header.js';\nimport Router from 'next/router';\nimport checkAuthAndRefresh from '../dbActions/checkAuth';\nimport Loading from './loading';\nimport Logo from '../components/Logo.js';\nimport { Alert, Form, Button, Col, Navbar, Card } from 'react-bootstrap';\nimport Link from 'next/link';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      email: '',\n      password: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState(_defineProperty({}, e.target.id, e.target.value));\n\n      console.log(_this.state.email);\n      console.log(_this.state.password);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (e) {\n      event.preventDefault();\n      var db = fire.firestore();\n      fire.auth().signInWithEmailAndPassword(_this.state.email, _this.state.password).then(function (user) {\n        db.collection(\"users\").doc(user.user.uid).get().then(function (doc) {\n          Router.push('/');\n        });\n      }).catch(function (err) {\n        event.stopPropagation();\n\n        _this.props.dispatch({\n          type: 'LOGIN_ERR',\n          msg: err.message\n        });\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (!this.props.authChecked) checkAuthAndRefresh(this.props.dispatch);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!this.props.authChecked) {\n        return React.createElement(Loading, null);\n      }\n\n      return React.createElement(\"div\", null, React.createElement(Header, {\n        isLogin: true\n      }), React.createElement(\"div\", {\n        style: {\n          height: '100vh',\n          width: '100%',\n          backgroundImage: 'linear-gradient(#99E1ED, white)'\n        },\n        className: \"d-flex flex-column align-items-center justify-content-center\"\n      }, React.createElement(Logo, {\n        use: \"login\"\n      }), React.createElement(\"main\", {\n        style: {\n          maxWidth: '400px'\n        },\n        className: \"m-2\"\n      }, React.createElement(Card, {\n        className: \"m-2\"\n      }, React.createElement(Card.Body, null, React.createElement(Card.Text, null, this.props.loginErr ? React.createElement(Alert, {\n        className: \"mb-4\",\n        style: {\n          textAlign: 'left',\n          direction: 'ltr'\n        },\n        variant: \"danger\"\n      }, React.createElement(\"i\", {\n        class: \"ltr fas fa-exclamation-circle\"\n      }), this.props.loginErr) : '', React.createElement(Form, {\n        onSubmit: function onSubmit(e) {\n          return _this2.handleSubmit(e);\n        }\n      }, React.createElement(Form.Group, {\n        controlId: \"formBasicEmail\"\n      }, React.createElement(Form.Label, null, \"\\u05DB\\u05EA\\u05D5\\u05D1\\u05EA \\u05D3\\u05D5\\u05D0\\u05E8 \\u05D0\\u05DC\\u05E7\\u05D8\\u05E8\\u05D5\\u05E0\\u05D9\"), React.createElement(Form.Control, {\n        type: \"email\",\n        id: \"email\",\n        onChange: this.handleChange\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicPassword\"\n      }, React.createElement(Form.Label, null, \"\\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\"), React.createElement(Form.Control, {\n        type: \"password\",\n        id: \"password\",\n        onChange: this.handleChange\n      })), React.createElement(\"p\", null, React.createElement(Link, {\n        href: \"#\"\n      }, \"\\u05E9\\u05DB\\u05D7\\u05EA\\u05D9 \\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\")), React.createElement(Button, {\n        type: \"submit\",\n        onClick: this.handleSubmit,\n        variant: \"primary\"\n      }, \"\\u05D4\\u05EA\\u05D7\\u05D1\\u05E8\\u05D5\\u05EA\"))))))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default connect(function (state) {\n  return state;\n})(Login);","map":null,"metadata":{},"sourceType":"module"}