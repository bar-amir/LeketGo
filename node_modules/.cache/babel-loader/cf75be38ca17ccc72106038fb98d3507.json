{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Oz\\\\Desktop\\\\leket\\\\leket\\\\components\\\\TableBlock.js\";\nimport React from 'react';\nimport Entry from '../components/Entry';\nimport { connect } from \"react-redux\";\nimport { Table, CardColumns, Card, Button, ButtonGroup, InputGroup, Form, Col, Row, DropdownButton, Dropdown, FormControl, Navbar } from 'react-bootstrap';\nimport setAssignedTasks from '../dbActions/setAssignedTasks';\nimport handleFileUpload from '../dbActions/addTasksFromFile';\n\nvar TableBlock =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TableBlock, _React$Component);\n\n  function TableBlock(props) {\n    var _this;\n\n    _classCallCheck(this, TableBlock);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TableBlock).call(this, props));\n    _this.state = {\n      tableColumns: _this.getTableColumns(),\n      entrySelectedCounter: 0,\n      selectedEntries: {},\n      columnNames: {\n        'actions': 'פעולות',\n        'date': 'תאריך',\n        'time': 'שעה',\n        'city': 'עיר',\n        'fullAddress': 'כתובת',\n        'fullAddressWithButtons': 'כתובת',\n        'name': 'ספק',\n        'uid': 'uid',\n        'firstName': 'שם פרטי',\n        'lastName': 'שם משפחה',\n        'fullName': 'שם מלא',\n        'region': 'אזור',\n        'email': 'דוא\"ל',\n        'tz': 'תעודת זהות',\n        'street': 'רחוב ומספר',\n        'contactName': 'שם',\n        'contactNumber': 'טלפון',\n        'checkBox': '',\n        'status': '',\n        'phone': 'טלפון'\n      },\n      searchValue: '',\n      searchField: _this.props.page == 'adminUsers' ? 'firstName' : 'name'\n    };\n    _this.selectCallback = _this.selectCallback.bind(_assertThisInitialized(_this));\n    _this.cancelSelection = _this.cancelSelection.bind(_assertThisInitialized(_this));\n    _this.assignTasks = _this.assignTasks.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TableBlock, [{\n    key: \"getTableColumns\",\n    value: function getTableColumns() {\n      switch (this.props.page) {\n        case 'index':\n          return ['checkBox', 'date', 'time', 'city', 'name'];\n\n        case 'assignedTasks':\n          return ['date', 'time', 'fullAddressWithButtons', 'name', 'contactName', 'contactNumber', 'actions'];\n\n        case 'taskReports':\n          return ['date', 'time', 'fullAddressWithButtons', 'name', 'contactName', 'contactNumber', 'actions'];\n\n        case 'adminUsers':\n          return ['tz', 'firstName', 'lastName', 'email', 'phone', 'region', 'actions'];\n\n        case 'adminTasks':\n          return ['status', 'date', 'time', 'street', 'city', 'name', 'actions'];\n\n        default:\n          break;\n      }\n    }\n  }, {\n    key: \"selectCallback\",\n    value: function selectCallback(entry, isSelected) {\n      var newSelectedEntries = _objectSpread({}, this.state.selectedEntries);\n\n      if (isSelected) {\n        newSelectedEntries[entry.id] = _objectSpread({}, entry);\n        this.setState({\n          entrySelectedCounter: this.state.entrySelectedCounter + 1,\n          selectedEntries: newSelectedEntries\n        });\n      } else {\n        delete newSelectedEntries[entry.id];\n        this.setState({\n          entrySelectedCounter: this.state.entrySelectedCounter - 1,\n          selectedEntries: newSelectedEntries\n        });\n      }\n    }\n  }, {\n    key: \"cancelSelection\",\n    value: function cancelSelection() {\n      this.setState({\n        entrySelectedCounter: 0,\n        selectedEntries: {}\n      });\n    }\n  }, {\n    key: \"assignTasks\",\n    value: function assignTasks() {\n      var taskIDs = [];\n\n      for (var taskID in this.state.selectedEntries) {\n        taskIDs.push(taskID);\n      }\n\n      setAssignedTasks(this.props, taskIDs, this.state.entrySelectedCounter, this.state.selectedEntries);\n    }\n  }, {\n    key: \"handleChangeForm\",\n    value: function handleChangeForm(event) {\n      var fleldVal = event.target.value;\n      this.setState({\n        searchValue: fleldVal\n      });\n    }\n  }, {\n    key: \"handleChangeDropDown\",\n    value: function handleChangeDropDown(event) {\n      var fleldVal = event.target.value;\n\n      switch (fleldVal) {\n        case 'שם פרטי':\n          this.setState({\n            searchField: 'firstName'\n          });\n          break;\n\n        case 'שם משפחה':\n          this.setState({\n            searchField: 'lastName'\n          });\n          break;\n\n        case 'תעודת זהות':\n          this.setState({\n            searchField: 'tz'\n          });\n          break;\n\n        case 'רחוב ומספר':\n          this.setState({\n            searchField: 'address'\n          });\n          break;\n\n        case 'עיר מגורים':\n          this.setState({\n            searchField: 'city'\n          });\n          break;\n\n        case 'מספר טלפון':\n          this.setState({\n            searchField: 'phone'\n          });\n          break;\n\n        case 'דואר אלקטרוני':\n          this.setState({\n            searchField: 'email'\n          });\n          break;\n\n        case 'ספק':\n          this.setState({\n            searchField: 'name'\n          });\n          break;\n\n        case 'עיר':\n          this.setState({\n            searchField: 'city'\n          });\n          break;\n\n        case 'רחוב ומספר':\n          this.setState({\n            searchField: 'address'\n          });\n          break;\n\n        case 'איש קשר':\n          this.setState({\n            searchField: 'contact name'\n          });\n          break;\n\n        case 'טלפון':\n          this.setState({\n            searchField: 'contact number'\n          });\n          break;\n\n        default:\n          break;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.props.data.length == 0) {\n        return React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            width: '100%',\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"nothing\",\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: \"/static/nothing.png\",\n          width: \"100\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          style: {\n            fontSize: '20px',\n            marginTop: '10px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \"\\u05D4\\u05DE\\u05DE\\u05DE... \\u05D0\\u05D9\\u05DF \\u05DB\\u05D0\\u05DF \\u05DB\\u05DC\\u05D5\\u05DD\")));\n      } else {\n        var actionsBar = '';\n\n        if (this.props.isSelectable && this.state.entrySelectedCounter > 0) {\n          actionsBar = React.createElement(Navbar, {\n            bg: \"light\",\n            fixed: \"bottom\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 172\n            },\n            __self: this\n          }, React.createElement(ButtonGroup, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 173\n            },\n            __self: this\n          }, React.createElement(Button, {\n            onClick: this.assignTasks,\n            variant: \"primary\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 174\n            },\n            __self: this\n          }, \"\\u05E9\\u05D9\\u05D1\\u05D5\\u05E5 \", this.state.entrySelectedCounter, \" \\u05D0\\u05D9\\u05E1\\u05D5\\u05E4\\u05D9\\u05DD\"), React.createElement(Button, {\n            onClick: this.cancelSelection,\n            variant: \"secondary\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175\n            },\n            __self: this\n          }, \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\")));\n        }\n\n        if (this.props.isSearchable && this.props.page == 'adminUsers') {\n          actionsBar = React.createElement(Navbar, {\n            bg: \"light\",\n            fixed: \"bottom\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181\n            },\n            __self: this\n          }, React.createElement(Form, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182\n            },\n            __self: this\n          }, React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 183\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 184\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"btn-group\",\n            role: \"group\",\n            \"aria-label\": \"Basic example\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 185\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            style: {\n              whiteSpace: 'nowrap'\n            },\n            type: \"button\",\n            className: \"btn btn-primary\",\n            onClick: function onClick() {\n              return _this2.props.dispatch({\n                type: 'OPEN_MODAL',\n                msg: 'ADD_USER',\n                entries: _this2.props.entry\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 186\n            },\n            __self: this\n          }, \"\\u05D4\\u05D5\\u05E1\\u05E4\\u05EA \\u05DE\\u05EA\\u05E0\\u05D3\\u05D1\"), React.createElement(\"button\", {\n            style: {\n              whiteSpace: 'nowrap'\n            },\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            onClick: function onClick() {\n              return _this2.props.dispatch({\n                type: 'OPEN_MODAL',\n                msg: 'ADD_USER_CSV',\n                entries: _this2.props.entry\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187\n            },\n            __self: this\n          }, \"\\u05D4\\u05D5\\u05E1\\u05E4\\u05D4 \\u05DE\\u05E7\\u05D5\\u05D1\\u05E5\"))), React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 189\n            },\n            __self: this\n          }, React.createElement(InputGroup, {\n            className: \"mb-3\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190\n            },\n            __self: this\n          }, React.createElement(Form.Control, {\n            as: \"select\",\n            variant: \"outline-secondary\",\n            title: \"Dropdown\",\n            drop: \"up\",\n            onChange: this.handleChangeDropDown.bind(this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191\n            },\n            __self: this\n          }, React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196\n            },\n            __self: this\n          }, \"\\u05E9\\u05DD \\u05E4\\u05E8\\u05D8\\u05D9\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197\n            },\n            __self: this\n          }, \"\\u05E9\\u05DD \\u05DE\\u05E9\\u05E4\\u05D7\\u05D4\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198\n            },\n            __self: this\n          }, \"\\u05EA\\u05E2\\u05D5\\u05D3\\u05EA \\u05D6\\u05D4\\u05D5\\u05EA\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, \"\\u05E8\\u05D7\\u05D5\\u05D1 \\u05D5\\u05DE\\u05E1\\u05E4\\u05E8\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 200\n            },\n            __self: this\n          }, \"\\u05E2\\u05D9\\u05E8 \\u05DE\\u05D2\\u05D5\\u05E8\\u05D9\\u05DD\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201\n            },\n            __self: this\n          }, \"\\u05DE\\u05E1\\u05E4\\u05E8 \\u05D8\\u05DC\\u05E4\\u05D5\\u05DF\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 202\n            },\n            __self: this\n          }, \"\\u05D3\\u05D5\\u05D0\\u05E8 \\u05D0\\u05DC\\u05E7\\u05D8\\u05E8\\u05D5\\u05E0\\u05D9\")), React.createElement(FormControl, {\n            onChange: this.handleChangeForm.bind(this),\n            \"aria-describedby\": \"basic-addon1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 204\n            },\n            __self: this\n          }))))));\n        }\n\n        if (this.props.isSearchable && this.props.page == 'adminTasks') {\n          actionsBar = React.createElement(Navbar, {\n            bg: \"light\",\n            fixed: \"bottom\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 213\n            },\n            __self: this\n          }, React.createElement(Form, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 214\n            },\n            __self: this\n          }, React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 215\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 216\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"btn-group\",\n            role: \"group\",\n            \"aria-label\": \"Basic example\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 217\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            type: \"file\",\n            id: \"fileUploader\",\n            accept: \"xlsx\",\n            style: {\n              display: \"none\"\n            },\n            onChange: function onChange(e) {\n              return handleFileUpload(e.target.files[0]);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 218\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            style: {\n              whiteSpace: 'nowrap'\n            },\n            type: \"button\",\n            className: \"btn btn-primary\",\n            onClick: function onClick() {\n              return _this2.props.dispatch({\n                type: 'OPEN_MODAL',\n                msg: 'ADD_TASK',\n                entries: _this2.props.entry\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 219\n            },\n            __self: this\n          }, \"\\u05D4\\u05D5\\u05E1\\u05E4\\u05EA \\u05D0\\u05D9\\u05E1\\u05D5\\u05E3\"), React.createElement(\"button\", {\n            style: {\n              whiteSpace: 'nowrap'\n            },\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            onClick: function onClick() {\n              return document.getElementById('fileUploader').click();\n            } //this.props.dispatch({ type: 'OPEN_MODAL', msg: 'ADD_TASK_CSV', entries: this.props.entry})\n            ,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 220\n            },\n            __self: this\n          }, \"\\u05D4\\u05D5\\u05E1\\u05E4\\u05D4 \\u05DE\\u05E7\\u05D5\\u05D1\\u05E5\"), React.createElement(\"button\", {\n            style: {\n              whiteSpace: 'nowrap'\n            },\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            onClick: function onClick() {\n              return _this2.props.dispatch({\n                type: 'OPEN_MODAL',\n                msg: 'EXPORT_TASK_CSV',\n                entries: _this2.props.entry\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 226\n            },\n            __self: this\n          }, \"\\u05D9\\u05D9\\u05E6\\u05D5\\u05D0 \\u05D3\\u05D5\\u05D7\"))), React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 229\n            },\n            __self: this\n          }, React.createElement(InputGroup, {\n            className: \"mb-3\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 230\n            },\n            __self: this\n          }, React.createElement(Form.Control, {\n            as: \"select\",\n            variant: \"outline-secondary\",\n            title: \"Dropdown\",\n            drop: \"up\",\n            onChange: this.handleChangeDropDown.bind(this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 231\n            },\n            __self: this\n          }, React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 237\n            },\n            __self: this\n          }, \"\\u05E1\\u05E4\\u05E7\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 238\n            },\n            __self: this\n          }, \"\\u05E2\\u05D9\\u05E8\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 239\n            },\n            __self: this\n          }, \"\\u05E8\\u05D7\\u05D5\\u05D1 \\u05D5\\u05DE\\u05E1\\u05E4\\u05E8\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 240\n            },\n            __self: this\n          }, \"\\u05D0\\u05D9\\u05E9 \\u05E7\\u05E9\\u05E8\"), React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 241\n            },\n            __self: this\n          }, \"\\u05D8\\u05DC\\u05E4\\u05D5\\u05DF\")), React.createElement(FormControl, {\n            onChange: this.handleChangeForm.bind(this),\n            \"aria-describedby\": \"basic-addon1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 243\n            },\n            __self: this\n          }))))));\n        }\n\n        if (this.props.tableTasksCardView) {\n          return React.createElement(CardColumns, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 252\n            },\n            __self: this\n          }, this.props.data.map(function (entry) {\n            var options = {\n              weekday: 'short',\n              year: 'numeric',\n              month: 'numeric',\n              day: 'numeric'\n            };\n            var date = entry.timestamp.toDate();\n            return React.createElement(Entry, {\n              tableTasksCardView: _this2.props.tableTasksCardView,\n              page: _this2.props.page,\n              type: _this2.props.type,\n              key: entry.id,\n              selectCallback: _this2.selectCallback,\n              entry: entry,\n              tableColumns: _this2.state.tableColumns,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 257\n              },\n              __self: this\n            });\n          }));\n        } else {\n          return React.createElement(\"div\", {\n            className: \"table-responsive\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 264\n            },\n            __self: this\n          }, React.createElement(Table, {\n            hover: true,\n            responsive: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 265\n            },\n            __self: this\n          }, React.createElement(\"thead\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 266\n            },\n            __self: this\n          }, React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 267\n            },\n            __self: this\n          }, this.state.tableColumns.map(function (column) {\n            switch (column) {\n              default:\n                return React.createElement(\"th\", {\n                  scope: \"col\",\n                  key: column,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 272\n                  },\n                  __self: this\n                }, _this2.state.columnNames[column]);\n            }\n          }))), React.createElement(\"tbody\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 278\n            },\n            __self: this\n          }, this.props.data.map(function (entry) {\n            var isSelected = false;\n\n            if (_this2.state.selectedEntries[entry.id]) {\n              isSelected = true;\n            }\n\n            var ret = React.createElement(Entry, {\n              page: _this2.props.page,\n              isSelected: isSelected,\n              isSelectable: _this2.props.isSelectable,\n              type: _this2.props.type,\n              key: entry.id,\n              selectCallback: _this2.selectCallback,\n              entry: entry,\n              tableColumns: _this2.state.tableColumns,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 284\n              },\n              __self: this\n            });\n\n            if (_this2.props.isSearchable) {\n              for (var key in entry) {\n                if (key == _this2.state.searchField) if (entry[key].includes(_this2.state.searchValue)) return ret;\n              }\n            } else {\n              return ret;\n            }\n          }))), actionsBar);\n        }\n      }\n    }\n  }]);\n\n  return TableBlock;\n}(React.Component);\n\nexport default connect(function (state) {\n  return state;\n})(TableBlock);","map":{"version":3,"sources":["C:\\Users\\Oz\\Desktop\\leket\\leket\\components\\TableBlock.js"],"names":["React","Entry","connect","Table","CardColumns","Card","Button","ButtonGroup","InputGroup","Form","Col","Row","DropdownButton","Dropdown","FormControl","Navbar","setAssignedTasks","handleFileUpload","TableBlock","props","state","tableColumns","getTableColumns","entrySelectedCounter","selectedEntries","columnNames","searchValue","searchField","page","selectCallback","bind","cancelSelection","assignTasks","entry","isSelected","newSelectedEntries","id","setState","taskIDs","taskID","push","event","fleldVal","target","value","data","length","display","width","alignItems","justifyContent","flexDirection","fontSize","marginTop","actionsBar","isSelectable","isSearchable","whiteSpace","dispatch","type","msg","entries","handleChangeDropDown","handleChangeForm","e","files","document","getElementById","click","tableTasksCardView","map","options","weekday","year","month","day","date","timestamp","toDate","column","ret","key","includes","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Entry from '../components/Entry'\r\nimport { connect } from \"react-redux\"\r\nimport { Table,CardColumns, Card, Button, ButtonGroup, InputGroup, Form, Col, Row, DropdownButton, Dropdown, FormControl, Navbar } from 'react-bootstrap'\r\nimport setAssignedTasks from '../dbActions/setAssignedTasks'\r\nimport handleFileUpload from '../dbActions/addTasksFromFile'\r\n\r\nclass TableBlock extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttableColumns: this.getTableColumns(),\r\n\t\t\tentrySelectedCounter: 0,\r\n\t\t\tselectedEntries: {},\r\n\t\t\tcolumnNames: {\r\n\t\t\t\t'actions': 'פעולות',\r\n\t\t\t\t'date': 'תאריך',\r\n\t\t\t\t'time': 'שעה',\r\n\t\t\t\t'city': 'עיר',\r\n\t\t\t\t'fullAddress': 'כתובת',\r\n\t\t\t\t'fullAddressWithButtons': 'כתובת',\r\n\t\t\t\t'name': 'ספק',\r\n\t\t\t\t'uid': 'uid',\r\n\t\t\t\t'firstName': 'שם פרטי',\r\n\t\t\t\t'lastName': 'שם משפחה',\r\n\t\t\t\t'fullName': 'שם מלא',\r\n\t\t\t\t'region': 'אזור',\r\n\t\t\t\t'email': 'דוא\"ל',\r\n\t\t\t\t'tz': 'תעודת זהות',\r\n\t\t\t\t'street': 'רחוב ומספר',\r\n\t\t\t\t'contactName': 'שם',\r\n\t\t\t\t'contactNumber': 'טלפון',\r\n\t\t\t\t'checkBox': '',\r\n\t\t\t\t'status': '',\r\n\t\t\t\t'phone': 'טלפון'\r\n\t\t\t},\r\n\t\t\tsearchValue: '',\r\n\t\t\tsearchField: this.props.page == 'adminUsers' ? 'firstName' : 'name',\r\n\t\t};\r\n\t\tthis.selectCallback = this.selectCallback.bind(this);\r\n\t\tthis.cancelSelection = this.cancelSelection.bind(this);\r\n\t\tthis.assignTasks = this.assignTasks.bind(this);\r\n\t}\r\n\r\n\tgetTableColumns() {\r\n\t\tswitch (this.props.page) {\r\n\t\t\tcase 'index':\r\n\t\t\t\treturn ['checkBox', 'date', 'time', 'city', 'name'];\r\n\t\t\tcase 'assignedTasks':\r\n\t\t\t\treturn ['date', 'time', 'fullAddressWithButtons', 'name', 'contactName', 'contactNumber', 'actions'];\r\n\t\t\tcase 'taskReports':\r\n\t\t\t\treturn ['date', 'time', 'fullAddressWithButtons', 'name', 'contactName', 'contactNumber', 'actions'];\r\n\t\t\tcase 'adminUsers':\r\n\t\t\t\treturn ['tz', 'firstName', 'lastName', 'email', 'phone', 'region', 'actions'];\r\n\t\t\tcase 'adminTasks':\r\n\t\t\t\t\treturn ['status', 'date', 'time', 'street', 'city', 'name', 'actions'];\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tselectCallback(entry, isSelected) {\r\n\t\tlet newSelectedEntries = {...this.state.selectedEntries};\r\n\t\tif(isSelected){\r\n\t\t\tnewSelectedEntries[entry.id] = {...entry};\r\n\t\t\tthis.setState({\r\n\t\t\t\tentrySelectedCounter: this.state.entrySelectedCounter + 1,\r\n\t\t\t\tselectedEntries: newSelectedEntries\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tdelete newSelectedEntries[entry.id];\r\n\t\t\tthis.setState({\r\n\t\t\t\tentrySelectedCounter: this.state.entrySelectedCounter - 1,\r\n\t\t\t\tselectedEntries: newSelectedEntries\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcancelSelection() {\r\n\t\tthis.setState({\r\n\t\t\tentrySelectedCounter: 0,\r\n\t\t\tselectedEntries: {}\r\n\t\t});\r\n\t}\r\n\r\n\tassignTasks() {\r\n        var taskIDs = [];\r\n        for (var taskID in this.state.selectedEntries) {\r\n            taskIDs.push(taskID)         \r\n        }\r\n        setAssignedTasks(this.props, taskIDs, this.state.entrySelectedCounter, this.state.selectedEntries)\r\n\t}\r\n\r\n\thandleChangeForm(event) {\r\n\t\t\r\n\t\tlet fleldVal = event.target.value;\r\n\t\tthis.setState({searchValue: fleldVal});\r\n\t}\r\n\r\n\thandleChangeDropDown(event) {\r\n\t\tlet fleldVal = event.target.value;\r\n\t\tswitch (fleldVal) {\r\n\t\t\tcase 'שם פרטי':\r\n\t\t\t\tthis.setState({searchField: 'firstName'});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'שם משפחה':\r\n\t\t\t\t\tthis.setState({searchField: 'lastName'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'תעודת זהות':\r\n\t\t\t\tthis.setState({searchField: 'tz'});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'רחוב ומספר':\r\n\t\t\t\tthis.setState({searchField: 'address'});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'עיר מגורים':\r\n\t\t\t\t\tthis.setState({searchField: 'city'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'מספר טלפון':\r\n\t\t\t\tthis.setState({searchField: 'phone'});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'דואר אלקטרוני':\r\n\t\t\t\tthis.setState({searchField: 'email'});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'ספק':\r\n\t\t\t\t\tthis.setState({searchField: 'name'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'עיר':\r\n\t\t\t\t\tthis.setState({searchField: 'city'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'רחוב ומספר':\r\n\t\t\t\t\tthis.setState({searchField: 'address'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'איש קשר':\r\n\t\t\t\t\tthis.setState({searchField: 'contact name'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 'טלפון':\r\n\t\t\t\t\tthis.setState({searchField: 'contact number'});\r\n\t\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.data.length == 0){\r\n\t\t\treturn (\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\tjustifyContent: 'center'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<div className=\"nothing\" style= {{\r\n\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\tflexDirection: 'column',\r\n\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\tjustifyContent: 'center'\r\n\t\t\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<img src=\"/static/nothing.png\" width=\"100\"/>\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tfontSize: '20px',\r\n\t\t\t\t\t\t\tmarginTop: '10px'\r\n\t\t\t\t\t\t}}>המממ... אין כאן כלום</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\tlet actionsBar = '';\r\n\t\tif (this.props.isSelectable && this.state.entrySelectedCounter > 0) {\r\n\t\t\tactionsBar = \r\n\t\t\t\t<Navbar bg='light' fixed='bottom'>\r\n\t\t\t\t\t<ButtonGroup>\r\n\t\t\t\t\t\t<Button onClick={this.assignTasks} variant='primary'>שיבוץ {this.state.entrySelectedCounter} איסופים</Button>\r\n\t\t\t\t\t\t<Button onClick={this.cancelSelection} variant='secondary'>ביטול</Button>\r\n\t\t\t\t\t</ButtonGroup>\r\n\t\t\t\t</Navbar>;\r\n\t\t}\r\n\t\tif (this.props.isSearchable && this.props.page=='adminUsers') {\r\n\t\t\tactionsBar = \r\n\t\t\t\t<Navbar bg='light' fixed='bottom'>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n\t\t\t\t\t\t\t<button style={{whiteSpace: 'nowrap'}} type=\"button\" className=\"btn btn-primary\" onClick={() => this.props.dispatch({ type: 'OPEN_MODAL', msg: 'ADD_USER', entries: this.props.entry})}>הוספת מתנדב</button>\r\n\t\t\t\t\t\t\t<button style={{whiteSpace: 'nowrap'}} type=\"button\" className=\"btn btn-secondary\" onClick={() => this.props.dispatch({ type: 'OPEN_MODAL', msg: 'ADD_USER_CSV', entries: this.props.entry})}>הוספה מקובץ</button></div>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\tas=\"select\"\r\n\t\t\t\t\t\t\t\tvariant='outline-secondary'\r\n\t\t\t\t\t\t\t\ttitle='Dropdown'\r\n\t\t\t\t\t\t\t\tdrop='up' onChange={this.handleChangeDropDown.bind(this)}>\r\n\t\t\t\t\t\t\t\t\t<option>שם פרטי</option>\r\n\t\t\t\t\t\t\t\t\t<option>שם משפחה</option>\r\n\t\t\t\t\t\t\t\t\t<option>תעודת זהות</option>\r\n\t\t\t\t\t\t\t\t\t<option>רחוב ומספר</option>\r\n\t\t\t\t\t\t\t\t\t<option>עיר מגורים</option>\r\n\t\t\t\t\t\t\t\t\t<option>מספר טלפון</option>\r\n\t\t\t\t\t\t\t\t\t<option>דואר אלקטרוני</option>\r\n\t\t\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t\t\t\t<FormControl onChange={this.handleChangeForm.bind(this)} aria-describedby=\"basic-addon1\" />\r\n\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Navbar>;\r\n\t\t}\r\n\t\tif (this.props.isSearchable && this.props.page=='adminTasks') {\r\n\t\t\tactionsBar = \r\n\t\t\t\t<Navbar bg='light' fixed='bottom'>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n\t\t\t\t\t\t\t<input type='file' id='fileUploader' accept='xlsx' style={{ display: \"none\" }} onChange={(e) => handleFileUpload(e.target.files[0])} />\r\n\t\t\t\t\t\t\t<button style={{whiteSpace: 'nowrap'}} type=\"button\" className=\"btn btn-primary\" onClick={() => this.props.dispatch({ type: 'OPEN_MODAL', msg: 'ADD_TASK', entries: this.props.entry})}>הוספת איסוף</button>\r\n\t\t\t\t\t\t\t<button style={{whiteSpace: 'nowrap'}} type=\"button\" className=\"btn btn-secondary\" onClick=\r\n\t\t\t\t\t\t\t{() =>\r\n\t\t\t\t\t\t\t\tdocument.getElementById('fileUploader').click()\r\n\t\t\t\t\t\t\t\t//this.props.dispatch({ type: 'OPEN_MODAL', msg: 'ADD_TASK_CSV', entries: this.props.entry})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>הוספה מקובץ</button>\r\n\t\t\t\t\t\t\t<button style={{whiteSpace: 'nowrap'}} type=\"button\" className=\"btn btn-secondary\" onClick={() => this.props.dispatch({ type: 'OPEN_MODAL', msg: 'EXPORT_TASK_CSV', entries: this.props.entry})}>ייצוא דוח</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\tas=\"select\"\r\n\t\t\t\t\t\t\t\tvariant='outline-secondary'\r\n\t\t\t\t\t\t\t\ttitle='Dropdown'\r\n\t\t\t\t\t\t\t\tdrop='up'\r\n\t\t\t\t\t\t\t\tonChange={this.handleChangeDropDown.bind(this)}>\r\n\t\t\t\t\t\t\t\t\t<option>ספק</option>\r\n\t\t\t\t\t\t\t\t\t<option>עיר</option>\r\n\t\t\t\t\t\t\t\t\t<option>רחוב ומספר</option>\r\n\t\t\t\t\t\t\t\t\t<option>איש קשר</option>\r\n\t\t\t\t\t\t\t\t\t<option>טלפון</option>\r\n\t\t\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t\t\t\t<FormControl onChange={this.handleChangeForm.bind(this)} aria-describedby=\"basic-addon1\" />\r\n\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Navbar>;\r\n\t\t}\r\n\t\tif (this.props.tableTasksCardView){\r\n\t\t\treturn (\r\n\t\t\t\t<CardColumns>\r\n\t\t\t\t\t{this.props.data.map((entry) => {\r\n\t\t\t\t\t\tlet options = { weekday: 'short', year: 'numeric', month: 'numeric', day: 'numeric' };\r\n\t\t\t\t\t\tlet date = entry.timestamp.toDate();\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Entry tableTasksCardView={this.props.tableTasksCardView} page={this.props.page} type={this.props.type} key={entry.id} selectCallback={this.selectCallback} entry={entry} tableColumns={this.state.tableColumns}/>\r\n\t\t\t\t\t\t);})}\r\n\t\t\t\t</CardColumns>\r\n\t\t\t);\r\n\t\t}\r\n\t\telse {\r\n\t\treturn (\r\n\t\t\t<div className=\"table-responsive\">\r\n\t\t\t\t<Table hover responsive>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t{this.state.tableColumns.map((column) => {\r\n\t\t\t\t\t\t\tswitch (column){\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" key={column}>{this.state.columnNames[column]}</th>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{this.props.data.map((entry) => {\r\n\t\t\t\t\t\t\tlet isSelected = false;\r\n\t\t\t\t\t\t\tif (this.state.selectedEntries[entry.id]){\r\n\t\t\t\t\t\t\t\tisSelected = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet ret = <Entry page={this.props.page} isSelected={isSelected} isSelectable={this.props.isSelectable} type={this.props.type} key={entry.id} selectCallback={this.selectCallback} entry={entry} tableColumns={this.state.tableColumns}/>\r\n\t\t\t\t\t\t\tif (this.props.isSearchable){\r\n\t\t\t\t\t\t\t\tfor (let key in entry){\r\n\t\t\t\t\t\t\t\t\tif (key == this.state.searchField)\r\n\t\t\t\t\t\t\t\t\t\tif(entry[key].includes(this.state.searchValue))\r\n\t\t\t\t\t\t\t\t\t\t\treturn ret;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn ret;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</Table>\r\n\t\t\t\t{actionsBar}\r\n\t\t\t</div>\r\n\t\t);}\r\n\t\t\t\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(state => state)(TableBlock);"]},"metadata":{},"sourceType":"module"}